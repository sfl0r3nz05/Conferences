<!-- Styles -->
<style>
  #chartdiv {
    width: 90%;
    height: 4900px;
    font-size: 75pt
  }
</style>

<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->
<script>
  am4core.ready(function () {

    // Themes begin
    am4core.useTheme(am4themes_animated);
    // Themes end

    var chart = am4core.create("chartdiv", am4charts.RadarChart);
    chart.exporting.menu = new am4core.ExportMenu();

    chart.data = [
      {
        category: "1.1",
        value1: 98.57,
        value2: 98.57
      },
      {
        category: "1.2",
        value1: 97.36,
        value2: 97.36
      },
      {
        category: "1.3",
        value1: 98.48,
        value2: 98.48
      },
      {
        category: "1.4",
        value1: 97.02,
        value2: 97.02
      },
      {
        category: "1.5",
        value1: 97.24,
        value2: 97.24
      },
      {
        category: "1.6",
        value1: 97.95,
        value2: 97.95
      },
      {
        category: "2.1",
        value1: 68.31,
        value2: 68.31
      },
      {
        category: "2.2",
        value1: 99.66,
        value2: 99.66
      },
      {
        category: "2.3",
        value1: 98.47,
        value2: 98.47
      },
      {
        category: "2.4",
        value1: 97.91,
        value2: 97.91
      },
      {
        category: "2.5",
        value1: 98.72,
        value2: 98.72
      },
      {
        category: "2.6",
        value1: 98.26,
        value2: 98.26
      },
      {
        category: "2.7",
        value1: 99.41,
        value2: 99.41
      },
      {
        category: "2.8",
        value1: 97.82,
        value2: 97.82
      },
      {
        category: "2.9",
        value1: 99.16,
        value2: 99.16
      },
      {
        category: "2.10",
        value1: 99.31,
        value2: 99.31
      },
      {
        category: "3.1",
        value1: 97.88,
        value2: 97.88
      },
      {
        category: "3.2",
        value1: 62.98,
        value2: 62.98
      },
      {
        category: "4.1",
        value1: 98.18,
        value2: 98.18
      },
      {
        category: "4.2",
        value1: 98.79,
        value2: 98.79
      },
      {
        category: "5.1",
        value1: 99.94,
        value2: 99.94
      },
      {
        category: "6.1",
        value1: 98.07,
        value2: 98.07
      },
      {
        category: "6.2",
        value1: 99.71,
        value2: 99.71
      },
      {
        category: "6.3",
        value1: 97.98,
        value2: 97.98
      },
      {
        category: "6.4",
        value1: 99.77,
        value2: 99.77
      },
      {
        category: "6.5",
        value1: 98.57,
        value2: 98.57
      },
      {
        category: "7.1",
        value1: 96.18,
        value2: 96.18
      },
      {
        category: "7.2",
        value1: 99.27,
        value2: 99.27
      },
      {
        category: "7.3",
        value1: 99.12,
        value2: 99.12
      },
      {
        category: "7.4",
        value1: 98.45,
        value2: 98.45
      },
      {
        category: "7.5",
        value1: 98.98,
        value2: 98.98
      },
      {
        category: "8.1",
        value1: 76.73,
        value2: 76.73
      },
      {
        category: "8.2",
        value1: 99.93,
        value2: 99.93
      },
      {
        category: "8.3",
        value1: 98.98,
        value2: 98.98
      },
      {
        category: "8.4",
        value1: 99.79,
        value2: 99.79
      },
        {
        category: "8.5",
        value1: 99.95,
        value2: 99.95
      },
      {
        category: "8.6",
        value1: 99.78,
        value2: 99.78
      },
      {
        category: "8.7",
        value1: 71.31,
        value2: 71.31
      },
      {
        category: "8.8",
        value1: 99.88,
        value2: 99.88
      },
      {
        category: "9.1",
        value1: 97.85,
        value2: 97.85
      },
      {
        category: "9.2",
        value1: 99.63,
        value2: 99.63
      },
      {
        category: "9.3",
        value1: 97.87,
        value2: 97.87
      },
      {
        category: "10.1",
        value1: 98.43,
        value2: 98.43
      },
      {
        category: "10.2",
        value1: 68.22,
        value2: 68.22
      },
      {
        category: "10.3",
        value1: 99.01,
        value2: 99.01
      },
      {
        category: "10.4",
        value1: 99.36,
        value2: 99.36
      },
      {
        category: "10.5",
        value1: 99.21,
        value2: 99.21
      },
      {
        category: "11.1",
        value1: 98.91,
        value2: 98.91
      },
      {
        category: "11.2",
        value1: 97.93,
        value2: 97.93
      },
      {
        category: "11.3",
        value1: 98.68,
        value2: 98.68
      },
      {
        category: "12.1",
        value1: 99.06,
        value2: 99.06
      },
      {
        category: "13.1",
        value1: 99.01,
        value2: 99.01
      },
      {
        category: "13.2",
        value1: 61.38,
        value2: 61.38
      },
      {
        category: "13.3",
        value1: 99.52,
        value2: 99.52
      },
      {
        category: "14.1",
        value1: 75.21,
        value2: 75.21
      },
      {
        category: "15.1",
        value1: 98.97,
        value2: 98.97
      },
      {
        category: "16.1",
        value1: 99.19,
        value2: 99.19
      },
      {
        category: "16.2",
        value1: 98.78,
        value2: 98.78
      },
      {
        category: "16.3",
        value1: 98.09,
        value2: 98.09
      },
      {
        category: "16.4",
        value1: 99.45,
        value2: 99.45
      },
      {
        category: "16.5",
        value1: 99.14,
        value2: 99.14
      },
      {
        category: "17.1",
        value1: 97.91,
        value2: 97.91
      },    
      {
        category: "17.2",
        value1: 98.98,
        value2: 98.98
      },
      {
        category: "17.3",
        value1: 99.85,
        value2: 99.85
      },
      {
        category: "17.4",
        value1: 98.31,
        value2: 98.31
      },
      {
        category: "18.1",
        value1: 99.02,
        value2: 99.02
      },
      {
        category: "18.2",
        value1: 98.81,
        value2: 98.81
      },
      {
        category: "18.3",
        value1: 99.18,
        value2: 99.18
      },
      {
        category: "18.4",
        value1: 98.90,
        value2: 98.90
      },
      {
        category: "19.1",
        value1: 98.39,
        value2: 98.39
      },
      {
        category: "19.2",
        value1: 99.98,
        value2: 99.98
      },
      {
        category: "20.1",
        value1: 98.55,
        value2: 98.55
      },
      {
        category: "20.2",
        value1: 99.04,
        value2: 99.04
      },
      {
        category: "21.1",
        value1: 99.06,
        value2: 99.06
      },
      {
        category: "21.2",
        value1: 99.56,
        value2: 99.56
      },
      {
        category: "21.3",
        value1: 98.24,
        value2: 98.24
      },
      {
        category: "21.4",
        value1: 99.57,
        value2: 99.57
      },
      {
        category: "21.5",
        value1: 98.93,
        value2: 98.93
      },
      {
        category: "21.6",
        value1: 98.98,
        value2: 98.98
      },
      {
        category: "21.7",
        value1: 98.21,
        value2: 98.21
      },
      {
        category: "21.8",
        value1: 99.31,
        value2: 99.31
      },
      {
        category: "22.1",
        value1: 98.92,
        value2: 98.92
      },
      {
        category: "22.2",
        value1: 99.23,
        value2: 99.23
      },
      {
        category: "22.3",
        value1: 99.54,
        value2: 99.54
      },
      {
        category: "23.1",
        value1: 99.02,
        value2: 99.02
      }
    ];


chart.padding(0, 0, 0, 0);
chart.radarContainer.dy = 350;
chart.innerRadius = am4core.percent(65);
chart.radius = am4core.percent(80);
chart.zoomOutButton.padding(20,20,20,20);
chart.zoomOutButton.margin(20,20,20,20);
chart.zoomOutButton.background.cornerRadius(40,40,40,40);
chart.zoomOutButton.valign = "bottom";

var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.dataFields.category = "category";
categoryAxis.renderer.labels.template.location = 0.5;
categoryAxis.mouseEnabled = false;

var categoryAxisRenderer = categoryAxis.renderer;
categoryAxisRenderer.cellStartLocation = 0;
categoryAxisRenderer.tooltipLocation = 0.5;
categoryAxisRenderer.grid.template.disabled = true;
categoryAxisRenderer.ticks.template.disabled = true;

categoryAxisRenderer.axisFills.template.fill = am4core.color("#e8e8e8");
categoryAxisRenderer.axisFills.template.fillOpacity = 0.2;
categoryAxisRenderer.axisFills.template.location = -0.5;
categoryAxisRenderer.line.disabled = true;
categoryAxisRenderer.tooltip.disabled = true;
categoryAxis.renderer.labels.template.disabled = true;

categoryAxis.adapter.add("maxZoomFactor", function(maxZoomFactor, target) {
  return target.dataItems.length / 5;
})

var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

var valueAxisRenderer = valueAxis.renderer;

valueAxisRenderer.line.disabled = true;
valueAxisRenderer.grid.template.disabled = true;
valueAxisRenderer.ticks.template.disabled = true;
valueAxis.min = 0;
valueAxis.renderer.tooltip.disabled = true;


var series2 = chart.series.push(new am4charts.RadarSeries());
series2.dataFields.categoryX = "category";
series2.dataFields.valueY = "value2";
series2.stacked = true;
series2.fillOpacity = 0.3;
series2.fill = chart.colors.getIndex(1);
series2.stacked = true;
series2.strokeOpacity = 10;
series2.dataItems.template.locations.categoryX = 0.5;
series2.sequencedInterpolation = true;
series2.sequencedInterpolationDelay = 50;
series2.tooltip.pointerOrientation = "vertical";
series2.tooltip.label.fill = am4core.color("#ffffff");
series2.tooltip.label.fontSize = "1.8em";
series2.tooltip.autoTextColor = false;

chart.seriesContainer.zIndex = -1;
chart.scrollbarX = new am4core.Scrollbar();
chart.scrollbarX.parent = chart.bottomAxesContainer;
chart.scrollbarX.exportable = false;
chart.scrollbarY = new am4core.Scrollbar();
chart.scrollbarY.exportable = false;

chart.padding(-10, -10, -10, -10)

chart.scrollbarY.padding(20, 0, 20, 0);
chart.scrollbarX.padding(0, 0, 0, 0);

chart.scrollbarY.background.padding(0, 0, 0, 0);
chart.scrollbarX.background.padding(0, 0, 0, 0);


chart.cursor = new am4charts.RadarCursor();
chart.cursor.lineX.strokeOpacity = 10;
chart.cursor.lineY.strokeOpacity = 10;
chart.cursor.lineX.stroke = chart.colors.getIndex(1);
chart.cursor.innerRadius = am4core.percent(30);
chart.cursor.radius = am4core.percent(0);
chart.cursor.selection.fill = chart.colors.getIndex(1);

let bullet = series2.bullets.create();
bullet.fill = am4core.color("#000000");
bullet.strokeOpacity = 0;
bullet.locationX = 0.0;


let line = bullet.createChild(am4core.Line);
line.x2 = -100;
line.x1 = 0;
line.y1 = 0;
line.y1 = 0;
line.strokeOpacity = 5;

line.stroke = am4core.color("#000000");
line.strokeDasharray = "7,3";
line.strokeOpacity = 15.4;


let bulletValueLabel = bullet.createChild(am4core.Label);
bulletValueLabel.text = "{valueY.total.formatNumber('#.0')}";
bulletValueLabel.verticalCenter = "middle";
bulletValueLabel.horizontalCenter = "right";
bulletValueLabel.dy = -7;

let label = bullet.createChild(am4core.Label);
label.text = "{categoryX}";
label.verticalCenter = "middle";
label.paddingLeft = 20;

valueAxis.calculateTotals = true;


chart.legend = new am4charts.Legend();
chart.legend.parent = chart.radarContainer;
chart.legend.width = 0;
chart.legend.horizontalCenter = "middle";
chart.legend.markers.template.width = 22;
chart.legend.markers.template.height = 18;
chart.legend.markers.template.dy = 2;
chart.legend.labels.template.fontSize = "1.7em";
chart.legend.dy = 0;
chart.legend.dx = 0;

chart.legend.itemContainers.template.cursorOverStyle = am4core.MouseCursorStyle.pointer;
let itemHoverState = chart.legend.itemContainers.template.states.create("hover");
itemHoverState.properties.dx = 5;

let title = chart.radarContainer.createChild(am4core.Label);
title.fontSize = "1.2em";
title.verticalCenter = "bottom";
title.textAlign = "middle";
title.horizontalCenter = "middle";
title.fontWeigth = "800";

chart.maskBullets = false;

let circle = bullet.createChild(am4core.Circle);
circle.radius = 3;
let hoverState = circle.states.create("hover");

hoverState.properties.scale = 15;

bullet.events.on("positionchanged", function(event) {
    event.target.children.getIndex(0).invalidate();
    event.target.children.getIndex(1).invalidatePosition();
})


bullet.adapter.add("dx", function(dx, target) {
  let angle = categoryAxis.getAngle(target.dataItem, "categoryX", 0.5);
  return 20 * am4core.math.cos(angle);
})

bullet.adapter.add("dy", function(dy, target) {
  let angle = categoryAxis.getAngle(target.dataItem, "categoryX", 0.5);
  return 20 * am4core.math.sin(angle);
})

bullet.adapter.add("rotation", function(dy, target) {
  let angle = Math.min(chart.endAngle, Math.max(chart.startAngle, categoryAxis.getAngle(target.dataItem, "categoryX", 0.5)));
  return angle;
})


line.adapter.add("x2", function(x2, target) {
  let dataItem = target.dataItem;
  if (dataItem) {
    let position = valueAxis.valueToPosition(dataItem.values.valueY.value + dataItem.values.valueY.stack);
    return -(position * valueAxis.axisFullLength + 35);
  }
  return 0;
})


bulletValueLabel.adapter.add("dx", function(dx, target) {
  let dataItem = target.dataItem;

  if (dataItem) {
    let position = valueAxis.valueToPosition(dataItem.values.valueY.value + dataItem.values.valueY.stack);
    return -(position * valueAxis.axisFullLength + 40);
  }
  return 0;
})


chart.seriesContainer.zIndex = 10;
categoryAxis.zIndex = 11;
valueAxis.zIndex = 12;

chart.radarContainer.zIndex = 20;


let previousBullets = [];
series2.events.on("tooltipshownat", function(event) {
  let dataItem = event.dataItem;

  for (let i = 0; i < previousBullets.length; i++) {
    previousBullets[i].isHover = false;
  }

  previousBullets = [];

  let itemBullet = dataItem.bullets.getKey(bullet.uid);

  for (let i = 0; i < itemBullet.children.length; i++) {
    let sprite = itemBullet.children.getIndex(i);
    sprite.isHover = true;
    previousBullets.push(sprite);
  }
})

series2.tooltip.events.on("visibilitychanged", function() {
  if (!series2.tooltip.visible) {
    for (let i = 0; i < previousBullets.length; i++) {
      previousBullets[i].isHover = false;
    }
  }
})

chart.events.on("maxsizechanged", function() {
  if(chart.pixelInnerRadius < 200){
    title.disabled = true;
    chart.legend.verticalCenter = "middle";
    chart.legend.dy = 0;
  }
  else{
    title.disabled = false;
    chart.legend.verticalCenter = "top";
    chart.legend.dy = 20;
  }
})

}); // end am4core.ready()
</script>

<!-- HTML -->
<!-- Chart design inspired by Nicolas Rapp: https://nicolasrapp.com/studio/ -->
<div id="chartdiv"></div>